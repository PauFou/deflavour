<%= render "shared/navbar" %>

<div class="container">

  <h3 class="text-center mt-4 mb-5">Voici vos recommendations</h3>


  <div class="spirit-card-grid-reco" style="position: relative">
    <% current_user.recommendations.each do |reco| %>
    <div class="spirit-card">
      <img class="mt-2" src="<%=reco.spirit.image_url%>">
      <div class="spirit-card-infos">
        <div class="spirit-card-content">
          <div class="spirit-card-header-reco">
            <h4 class="text-center"><%= reco.spirit.name %></h4>
            <p class="text-center"><%= reco.spirit.producer %></p>
          </div>

          <div class="spirit-card-content-percentage">
            <div class="flex-wrapper justify-content-center">
              <div class="single-chart">
                <svg viewbox="0 0 36 36" class="circular-chart green">
                  <path class="circle-bg"
                    d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"
                  />
                  <path class="circle"
                    stroke-dasharray="<%= reco.percentages %>, 100"
                    d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"
                  />
                  <text x="18" y="20.35" class="percentage"><%= reco.percentages %>%</text>
                </svg>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <%end %>
  </div>
    <p class= "text-center">Commandez vos 5 échantillons (12cl) correspondant à vos goûts pour 25€. <br> Les 25€ vous seront remboursés lors de votre prochain achat.</p>
    <div class="d-flex justify-content-center my-5">
    <p class="btn-default-reco" data-bs-toggle="modal" data-bs-target="#exampleModal" href="#">Commandez votre coffret</p>
    </div>
</div>


      <%# <%= "Commandez votre coffret", order_recommendation_orders_path(spirits: current_user.recommendations.pluck(:spirit_id)), class:"btn-default" %>



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Mon panier</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="d-flex justify-content-between">
          <p> <strong>Coffret Deflavour</strong></p>
          <p><strong>25€</strong></p>
        </div>
        <ul class="list-unstyled">
          <% current_user.recommendations.each do |reco| %>
          <li>1 x <%= reco.spirit.name %>; 12cl</li>
          <% end %>
        </ul>
      </div>
      <div class="modal-footer ">
        <div class="d-flex justify-content-between">
          <p>Sous-total du panier: 25€<p>
          <%= link_to "Payer", order_recommendation_orders_path(spirits: current_user.recommendations.pluck(:spirit_id)), class:"btn-home" %>
        </div>
      </div>
    </div>
  </div>
</div>
